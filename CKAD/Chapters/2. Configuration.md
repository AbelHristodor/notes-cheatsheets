---
title: Configuration
Done: false
tags:
  - ckad
  - kubernetes
created: 2024-01-11T15:04
updated: 2024-01-21T17:30
---
# Pod
## Command & Args
When defining a pod like this:
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
  labels:
    app: myapp
spec:
  containers:
    - name: nginx-container
      image: nginx:<version|tag>
      command: ["my_command"]
      args: ["my_args", "3"]
```

you can also define some parameters like *command* and *args* to override the *entrypoint* and the *cmd*  statements from the docker image definition.
That means that in your Pod definition you can pass:
- `command`:  to override the `ENTRYPOINT` statement of the Dockerfile
- `args`: to override the `CMD` statement of the Dockerfile

**Remember**:  in docker, `CMD` gets overridden in `docker run <image> <my_command>`  by the `<my_command>` , but you cannot ovverride the `ENTRYPOINT`.

## Environment Variables
Env variables can be defined in multiple ways, the simples is by using the `env` key in the container configuration.
```yaml
spec:
	containers:
		- name: nginx
		  env:
			- name: MY_VAR
			  value: my_value
```
Also it can be populated from a ConfigMap or a Secret
```yaml
spec:
	containers:
		- name: nginx
		  env:
			- name: MY_VAR
			  valueFrom:
				  configmapKeyRef: # or secretKeyRef
```

# ConfigMap
Are used to store key-value pair data to be later passed to pods/deployments/other objects. As seen above they can be injected as env vars.
There are 2 steps in using configmaps:
## Creation
Imperative way:
1. Directly: `k create configmap <name> --from-literal=<key>=<value> --from-literal=...`
2. From a file: `k create configmap <name> --from-file=<path-to_file>`

Declarative way:
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
	name: my_name
data:
	MY_VAR: my_value
```
## Injection
To inject an entire configmap as env vars simply use the following
```yaml
envFrom:
 - configMapRef:
	 name: my_config_map
```
To inject one env var at the time use
```
env:
	- name:
	  valueFrom:
		  configMapKeyRef:
			  - name: my_config_map
			    key: MY_VAR
```



**Next:** [[3. Multi-Container]]